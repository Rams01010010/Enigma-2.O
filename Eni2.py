def setRotVal(value):
    if value == 'I':
        return ['''ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$_&-+()/*"':;!?,.~=\\^|%[]{} <>''','''AR<?"=5H_xgC*L78VtQKk|^n h@}{F~#J]Mmv,2!O'$NYp-fGi:4DEd.XcasSoz/0P31TjB+6ueW>qr(U9%\y&Zb;)[wlI''','''ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$_&-+()/*"':;!?,.~=\\^|%[]{} <>''']
    elif value == 'II':
        return ['''ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$_&-+()/*"':;!?,.~=\\^|%[]{} <>''','''"~dGh|,6_b^4jX5sC&{UN'Ak(/8QT9zV;7!BOo#0]KZLr)J$cyg:fEHD1vF[ a2+I.*<>\ePtqWxlpSm?RnMu@w}=Y-%3i''','''ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$_&-+()/*"':;!?,.~=\\^|%[]{} <>''']
    elif value == 'III':
        return ['''ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$_&-+()/*"':;!?,.~=\\^|%[]{} <>''','''L)0ud<OsW3&YGT^J;+81M[9Cexl?*EbUygv-n!kH _wm@(V"XFZtq:AchP7/S#B~I4ia,D\=56.po$Q']{>|fRr2z}Nj%K''','''ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$_&-+()/*"':;!?,.~=\\^|%[]{} <>''']
    elif value == 'IV':
        return ['''ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$_&-+()/*"':;!?,.~=\\^|%[]{} <>''','''{#<^h4iowFa@KIyOW"71?vE~Ggj\.]:MBXfnu|kb,J%!>023dY&L;C+6Qex=ZR_T-Ut'Vp}9mzcSr*($sNH8/l[ qAPD)5''','''ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$_&-+()/*"':;!?,.~=\\^|%[]{} <>''']
    elif value == 'V':
        return ['''ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$_&-+()/*"':;!?,.~=\\^|%[]{} <>''','''4B0-#%MNkVp89Kj!U{[Z;?E )>]&7um\WIq}Tvyd+3(.DO=CXFb|'oh6Q/5xJSiPa@rfg*,Az^1<l:sG2L$wRc_Yt"ne~H''','''ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$_&-+()/*"':;!?,.~=\\^|%[]{} <>''']
    elif value == 'VI':
        return ['''ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$_&-+()/*"':;!?,.~=\\^|%[]{} <>''','''sHk]ja^GoP\EcN?Ry 3V:v"~{Ahq6fm&*)+K'w(gx.[05XJ8}D9pO|e>dI1_2/Mn7CWBZ#F;U$@!iz,l-%<=bLYrt4uQTS''','''ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$_&-+()/*"':;!?,.~=\\^|%[]{} <>''']
    elif value == 'VII':
        return ['''ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$_&-+()/*"':;!?,.~=\\^|%[]{} <>''','''?c|d}4v*Ya-s#9"r5<XoNgx8Vtki[^L,K'j07bU~Tw>PhS q/$FE.1&fI:)2MW\\uZl!OeGQ3(BH%@n={zymD]J6_C;R+pA''','''ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$_&-+()/*"':;!?,.~=\\^|%[]{} <>''']
    elif value == 'VIII':
        return ['''ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$_&-+()/*"':;!?,.~=\\^|%[]{} <>''','''do4<m[P_cH'$IOi!3Dx%awJsguF]@G*?/0S>K}~rCz\ZjU16by{vkAlhNYVp9L-QB;7 qn)8^fX&tE+M:|"(.T,e2R#=5W''','''ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$_&-+()/*"':;!?,.~=\\^|%[]{} <>''']
    elif value == 'IX':
        return ['''ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$_&-+()/*"':;!?,.~=\\^|%[]{} <>''','''-03k{&=K?!uaZAhl8C[7y1z6m2c9fPw)M]Rd*4D"n;%i<INVFW>/jE:^($UL~5qXtSYexTvoG _@QJ#p,|HB'sOg.r\\b+}''','''ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$_&-+()/*"':;!?,.~=\\^|%[]{} <>''']
    elif value == 'X':
        return ['''ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$_&-+()/*"':;!?,.~=\\^|%[]{} <>''','''2d#kw)(!D/B%r,Sm8qsA{}F0\'cX:9aNx[*\\ JRhgjvQ$iUyTf<+&P>4t]G|Zo3eVH"-^7MW~LpKI@zb65.unCY;l_=E1O?''','''ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$_&-+()/*"':;!?,.~=\\^|%[]{} <>''']
    elif value == 'A':
        return '''(1UR6cGTNLKJ7I?P:DaHCV~n;*SqFd4{grsok0)Xjpbhitu>wx5@lB2_eyEM"\z!+3&[$Am^Z8'QY#O.,W=9/|]-%f} <v'''
    elif value == 'B':
        return '''aONDG@EWvRKL%CBs;J0~U:H,5ZAwg|"fckp<hl>?oi9_PtzIbyxuS1('+Y76[qF! r&-42./*e3VQ#nX)T=\^dM8]{}$jm'''
    elif value == 'C':
        return '''iZI@]{PLC?hHzYOGXVST#R~QNBev57a-wKAjrl:,'p_ks[$bg9%M0/2;4c!d8xDUuq f+()1*"om36Jn^W=|.\ytEF}&<>'''
    elif value == 'D':
        return '''m\\2DEd(/I%;oar$Wcz.jU@PkZYMbQFx:n+{TX~AgL1qN?| &4e]R)pC3w56[8-V>O_v9hG0H*"'fK!s,Sl=B^tJ7yi}u<#'''
#--------------------------------------------------------------------------------------

# Details
ETW = '''ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$_&-+()/*"':;!?,.~=\\^|%[]{} <>'''
rotors = {'I':setRotVal('I'),"II":setRotVal('II'),"III":setRotVal('III'),"IV":setRotVal('IV'),"V":setRotVal('V'),"VI":setRotVal('VI'),"VII":setRotVal('VII'),"VIII":setRotVal('VIII'),"IX":setRotVal('IX'),"X":setRotVal('X'),"A":setRotVal('A'),"B":setRotVal('B'),"C":setRotVal('C'),"D":setRotVal('D')}
notch  = {'I':'a',"II":'R',"III":'0',"IV":'2',"V":'d',"VI":'@',"VII":'&',"VIII":'W',"IX":'|',"X":'~'}

class ENIGMA:
    Plugboard = dict()
    R1,R2,R3,R4,R5,r1,r2,r3,r4,r5,plugBoard,reflector = "","","","","","","","","","","",""
    R,r,i,S = [],[],[],[]
    

    #setter
    def setter(self,RI='I',RII='II',RIII='III',RIV='IV',RV='V',rI='A',rII='A',rIII='A',rIV='A',rV='A',plugboard='',reflector='A',iI='A',iII='A',iIII='A',iIV='A',iV='A'):
        self.R1,self.R2,self.R3,self.R4,self.R5,self.sr1,self.sr2,self.sr3,self.sr4,self.sr5,self.r1,self.r2,self.r3,self.r4,self.r5,self.plugBoard,self.reflector,self.i1,self.i2,self.i3,self.i4,self.i5 = setRotVal(RI),setRotVal(RII),setRotVal(RIII),setRotVal(RIV),setRotVal(RV),setRotVal(RI),setRotVal(RII),setRotVal(RIII),setRotVal(RIV),setRotVal(RV),rI,rII,rIII,rIV,rV,plugboard,rotors[reflector],iI,iII,iIII,iIV,iV
        self.S = ['',self.sr1,self.sr2,self.sr3,self.sr4,self.sr5]
        self.R = [self.reflector,self.R1,self.R2,self.R3,self.R4,self.R5]
        self.r = ['',self.r1,self.r2,self.r3,self.r4,self.r5]
        self.i = ['',self.i1,self.i2,self.i3,self.i4,self.i5]

        self.Plugboard = {'A': 'A', 'B': 'B', 'C': 'C', 'D': 'D', 'E': 'E', 'F': 'F', 'G': 'G', 'H': 'H', 'I': 'I', 'J': 'J', 'K': 'K', 'L': 'L', 'M': 'M', 'N': 'N', 'O': 'O', 'P': 'P', 'Q': 'Q', 'R': 'R', 'S': 'S', 'T': 'T', 'U': 'U', 'V': 'V', 'W': 'W', 'X': 'X', 'Y': 'Y', 'Z': 'Z', 'a': 'a', 'b': 'b', 'c': 'c', 'd': 'd', 'e': 'e', 'f': 'f', 'g': 'g', 'h': 'h', 'i': 'i', 'j': 'j', 'k': 'k', 'l': 'l', 'm': 'm', 'n': 'n', 'o': 'o', 'p': 'p', 'q': 'q', 'r': 'r', 's': 's', 't': 't', 'u': 'u', 'v': 'v', 'w': 'w', 'x': 'x', 'y': 'y', 'z': 'z', '0': '0', '1': '1', '2': '2', '3': '3', '4': '4', '5': '5', '6': '6', '7': '7', '8': '8', '9': '9', '@': '@', '#': '#', '$': '$', '_': '_', '&': '&', '-': '-', '+': '+', '(': '(', ')': ')', '/': '/', '*': '*', '"': '"', "'": "'", ':': ':', ';': ';', '!': '!', '?': '?', ',': ',', '.': '.', '~': '~', '=': '=', '\\': '\\', '^': '^', '|': '|', '%': '%', '[': '[', ']': ']', '{': '{', '}': '}', ' ': ' ', '<': '<', '>': '>'}

        #check_plugboard
        self.plugBoard = self.plugBoard.split("-S-")
        k = ''.join(self.plugBoard)
        for i in k:
            if k.count(i) > 1:
                raise AttributeError
        
        #set_plugboard
        for i in self.plugBoard:
            if len(i) == 2:
                self.Plugboard[i[0]] = i[1]
                self.Plugboard[i[1]] = i[0]
            elif len(i) > 2 or len(i) == 1:
                raise AttributeError
        
        #set_ringsettings & initialSettings
        for j in range(1,6):
            self.R[j][2] = self.rotate(self.R[j][2],self.R[j][2].index(self.r[j]))
            self.R[j][0] = self.rotate(self.R[j][0],self.R[j][2].index(self.i[j]))
            self.R[j][1] = self.rotate(self.R[j][1],self.R[j][2].index(self.i[j]))
            self.R[j][2] = self.rotate(self.R[j][2],self.R[j][2].index(self.i[j]))
    
    #getter
    def getter(self):
        valuePack = (self.getKeys(rotors,self.sr1),self.getKeys(rotors,self.sr2),self.getKeys(rotors,self.sr3),self.getKeys(rotors,self.sr4),self.getKeys(rotors,self.sr5),self.r1,self.r2,self.r3,self.r4,self.r5,self.plugBoard,self.getKeys(rotors,self.reflector),self.i1,self.i2,self.i3,self.i4,self.i5)
        return valuePack
    
    #rotorPositions
    def getRotorPosition(self):
        valuePack = (self.R[1][2][0],self.R[2][2][0],self.R[3][2][0],self.R[4][2][0],self.R[5][2][0])
        return valuePack

    #get_keys from values
    def getKeys(self,dic,val):
        for key,value in dic.items():
            if val==value:
                return key

    #rotate_rotors
    def rotate(self,val,amt):
        v = val[amt:]+val[:amt]
        return v
    
    #run_the_given_letter_through_rotors
    def run_rotor(self,no,idx):
        if no == 0 :
            x = self.reflector[idx]
            return ETW.index(x)
        else: 
            x = self.R[no][1][idx]
            matchIndex = self.R[no][0].index(x)
            idx = self.run_rotor(no-1,matchIndex)
            x = self.R[no][0][idx]
            matchIndex = self.R[no][1].index(x)
            return matchIndex

    #autoRotate
    def autoRotate(self,val):
        k = []
        for i in range(val,1,-1):
            if self.R[i][2][0] == notch[self.getKeys(rotors,self.S[i])]:
                k.append(i)
        for i in range(3):
            self.R[val][i] = self.rotate(self.R[val][i],1)
        if len(k) != 0:
            if val == max(k):
                self.autoRotate(val - 1)
            else:
                self.autoRotate(max(k))

    #mainFunction
    def typeMsg(self,Value):
        self.autoRotate(5)
        encryptedMessage = self.Plugboard[ETW[self.run_rotor(5,ETW.index(self.Plugboard[Value]))]]
        return encryptedMessage

#SampleCode
if __name__ == '__main__':
    r = ENIGMA()
    r.setter('I','II','III','IV','V','A','A','A','A','A','','B','A','A','0','A','A')
    x = input("Enter a message : ")
    s = ''
    for i in x:
        #print(r.R[1][2][0],r.R[2][2][0],r.R[3][2][0],r.R[4][2][0],r.R[5][2][0])
        s += r.typeMsg(i)
    print(s)